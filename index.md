<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Fast Robots - Ruohan Liu</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand" href="#page-top">ECE5960: Fast Robots</a>
                <button class="navbar-toggler text-uppercase font-weight-bold bg-primary text-white rounded" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="#labs">LABS</a></li>
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="#about">About</a></li>
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="#contact">Contact</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class="masthead bg-primary text-white text-center">
            <div class="container d-flex align-items-center flex-column">
                <!-- Masthead Avatar Image-->
                <!-- <img class="masthead-avatar mb-5" src="assets/img/avataaars.svg" alt="..." /> -->
                <!-- Masthead Heading-->
                <h1 class="masthead-heading text-uppercase mb-0">RUOHAN LIU</h1>
                <!-- Icon Divider-->
                <div class="divider-custom divider-light">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- Masthead Subheading-->
                <p class="masthead-subheading font-weight-light mb-0">ECE MEng student</p>
                <p class="masthead-subheading font-weight-light mb-0">rl592@cornell.edu - Ithaca, NY</p>
                <p class="masthead-subheading font-weight-light mb-0">Course : ECE 5960 - Fast Robots - Spring 2022</p>

            </div>
        </header>
        <!-- Portfolio Section-->
        <section class="page-section labs" id="labs">
            <div class="container">
                <!-- Portfolio Section Heading-->
                <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">LABS</h2>
                <!-- Icon Divider-->
                <div class="divider-custom">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- Portfolio Grid Items-->
                <div class="row justify-content-center">
                    <!-- Portfolio Item 1-->
                    <div class="col-md-6 col-lg-4 mb-5">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal1">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>

                            <img class="img-fluid" src="assets/img/lab1cover.png" alt="..." />

                            <h3 class=" text-center  mb-0">Lab1 : Artemis</h3>
                            
                        </div>
                    </div>
                    <!-- Portfolio Item 2-->
                    <div class="col-md-6 col-lg-4 mb-5">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal2">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <!-- <img src="assets/img/lab2cover.gif" alt="this slowpoke moves"  width="350" /> -->
                            <img class="img-fluid" src="assets/img/lab2cover.png" alt="..." />
                            <h3 class=" text-center  mb-0">Lab2 : Bluetooth</h3>

                        </div>
                    </div>
                    <!-- Portfolio Item 3-->
                    <div class="col-md-6 col-lg-4 mb-5">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal3">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/video/lab3/compli.png" alt="..." />
                            <h3 class=" text-center  mb-0">Lab3 : Sensors</h3>
                        </div>
                    </div>
                    <!-- Portfolio Item 4-->
                    <div class="col-md-6 col-lg-4 mb-5 mb-lg-0">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal4">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/video/lab4/tof.jpg"  alt="..." />
                            <h3 class=" text-center  mb-0">Lab4 : Characterize your car</h3>
                        </div>
                    </div>
                    <!-- Portfolio Item 5-->
                    <div class="col-md-6 col-lg-4 mb-5 mb-md-0">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal5">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/img/lab5cover.png" alt="..." />
                            <h3 class=" text-center  mb-0">Lab5 : Motor driver and open loop control</h3>

                        </div>
                    </div>
                    <!-- Portfolio Item 6-->
                    <div class="col-md-6 col-lg-4 mb-5 mb-md-0">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal6">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/video/lab6/speed2m2.png" alt="..." />
                            <h3 class=" text-center  mb-0">Lab6 : PID speed control</h3>

                        </div>
                    </div>
                    <!-- Portfolio Item 7-->
                    <div class="col-md-6 col-lg-4 mb-5 mb-md-0">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal7">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>

                            <img class="img-fluid" src="assets/video/lab7/kfsuccess1.png" alt="..." />

                            <h3 class=" text-center  mb-0">Lab7 : Kalman filters</h3>
                            
                        </div>
                    </div>
                    <!-- Portfolio Item 8-->
                    <div class="col-md-6 col-lg-4 mb-5 mb-md-05">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal8">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/img/portfolio/cake.png" alt="..." />
                            <h3 class=" text-center  mb-0">Lab8 : Stunts</h3>

                        </div>
                    </div>
                    <!-- Portfolio Item 9-->
                    <div class="col-md-6 col-lg-4 mb-5 mb-md-0">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal9">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/video/lab9/map.png" alt="..." />
                            <h3 class=" text-center  mb-0">Lab9 : Mapping</h3>
                        </div>
                    </div>
                    <!-- Portfolio Item 10-->
                    <div class="col-md-6 col-lg-4 mb-5 mb-md-0">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal10">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/video/lab10/cover.png" alt="..." />
                            <h3 class=" text-center  mb-0">Lab10 : Simulator</h3>
                        </div>
                    </div>
                    <!-- Portfolio Item 11-->
                    <div class="col-md-6 col-lg-4 mb-5 mb-md-0">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal11">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/video/lab11/cover.png" alt="..." />
                            <h3 class=" text-center mb-0">Lab11 : Localization (sim)</h3>

                        </div>
                    </div>
                    <!-- Portfolio Item 12-->
                    <div class="col-md-6 col-lg-4 mb-5 mb-md-0">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal12">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/video/lab12/cover.png " alt="..." />
                            <h3 class=" text-center  mb-0">Lab12 : Localization (real)</h3>

                        </div>
                    </div>
                    <!-- Portfolio Item 13-->
                    <div class="col-md-6 col-lg-4">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal13">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/img/portfolio/submarine.png" alt="..." />
                            <h3 class=" text-center mb-0">Lab13 : Planning and Execution</h3>

                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- About Section-->
        <section class="page-section bg-primary text-white mb-0" id="about">
            <div class="container">
                <!-- About Section Heading-->
                <h2 class="page-section-heading text-center text-uppercase text-white">About</h2>
                <!-- Icon Divider-->
                <div class="divider-custom divider-light">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- About Section Content-->
                <div class="row">
                    <div class="col-lg-4 ms-auto"><p class="lead">Freelancer is a free bootstrap theme created by Start Bootstrap. The download includes the complete source files including HTML, CSS, and JavaScript as well as optional SASS stylesheets for easy customization.</p></div>
                    <div class="col-lg-4 me-auto"><p class="lead">You can create your own custom avatar for the masthead, change the icon in the dividers, and add your email address to the contact form to make it fully functional!</p></div>
                </div>
                <!-- About Section Button-->
                <div class="text-center mt-4">
                    <a class="btn btn-xl btn-outline-light" href="https://startbootstrap.com/theme/freelancer/">
                        <i class="fas fa-download me-2"></i>
                        Free Download!
                    </a>
                </div>
            </div>
        </section>
        <!-- Contact Section-->
        <section class="page-section" id="contact">
            <div class="container">
                <!-- Contact Section Heading-->
                <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">Contact Me</h2>
                <!-- Icon Divider-->
                <div class="divider-custom">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- Contact Section Form-->
                <div class="row justify-content-center">
                    <div class="col-lg-8 col-xl-7">
                        <!-- * * * * * * * * * * * * * * *-->
                        <!-- * * SB Forms Contact Form * *-->
                        <!-- * * * * * * * * * * * * * * *-->
                        <!-- This form is pre-integrated with SB Forms.-->
                        <!-- To make this form functional, sign up at-->
                        <!-- https://startbootstrap.com/solution/contact-forms-->
                        <!-- to get an API token!-->
                        <form id="contactForm" data-sb-form-api-token="API_TOKEN">
                            <!-- Name input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="name" type="text" placeholder="Enter your name..." data-sb-validations="required" />
                                <label for="name">Full name</label>
                                <div class="invalid-feedback" data-sb-feedback="name:required">A name is required.</div>
                            </div>
                            <!-- Email address input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="email" type="email" placeholder="name@example.com" data-sb-validations="required,email" />
                                <label for="email">Email address</label>
                                <div class="invalid-feedback" data-sb-feedback="email:required">An email is required.</div>
                                <div class="invalid-feedback" data-sb-feedback="email:email">Email is not valid.</div>
                            </div>
                            <!-- Phone number input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="phone" type="tel" placeholder="(123) 456-7890" data-sb-validations="required" />
                                <label for="phone">Phone number</label>
                                <div class="invalid-feedback" data-sb-feedback="phone:required">A phone number is required.</div>
                            </div>
                            <!-- Message input-->
                            <div class="form-floating mb-3">
                                <textarea class="form-control" id="message" type="text" placeholder="Enter your message here..." style="height: 10rem" data-sb-validations="required"></textarea>
                                <label for="message">Message</label>
                                <div class="invalid-feedback" data-sb-feedback="message:required">A message is required.</div>
                            </div>
                            <!-- Submit success message-->
                            <!---->
                            <!-- This is what your users will see when the form-->
                            <!-- has successfully submitted-->
                            <div class="d-none" id="submitSuccessMessage">
                                <div class="text-center mb-3">
                                    <div class="fw-bolder">Form submission successful!</div>
                                    To activate this form, sign up at
                                    <br />
                                    <a href="https://startbootstrap.com/solution/contact-forms">https://startbootstrap.com/solution/contact-forms</a>
                                </div>
                            </div>
                            <!-- Submit error message-->
                            <!---->
                            <!-- This is what your users will see when there is-->
                            <!-- an error submitting the form-->
                            <div class="d-none" id="submitErrorMessage"><div class="text-center text-danger mb-3">Error sending message!</div></div>
                            <!-- Submit Button-->
                            <button class="btn btn-primary btn-xl disabled" id="submitButton" type="submit">Send</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
        <!-- Footer-->
        <footer class="footer text-center">
            <div class="container">
                <div class="row">
                    <!-- Footer Location-->
                    <div class="col-lg-4 mb-5 mb-lg-0">
                        <h4 class="text-uppercase mb-4">Location</h4>
                        <p class="lead mb-0">
                            2215 John Daniel Drive
                            <br />
                            Clark, MO 65243
                        </p>
                    </div>
                    <!-- Footer Social Icons-->
                    <div class="col-lg-4 mb-5 mb-lg-0">
                        <h4 class="text-uppercase mb-4">Around the Web</h4>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-facebook-f"></i></a>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-twitter"></i></a>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-linkedin-in"></i></a>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-dribbble"></i></a>
                    </div>
                    <!-- Footer About Text-->
                    <div class="col-lg-4">
                        <h4 class="text-uppercase mb-4">About Freelancer</h4>
                        <p class="lead mb-0">
                            Freelance is a free to use, MIT licensed Bootstrap theme created by
                            <a href="http://startbootstrap.com">Start Bootstrap</a>
                            .
                        </p>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Copyright Section-->
        <div class="copyright py-4 text-center text-white">
            <div class="container"><small>Copyright &copy; Your Website 2021</small></div>
        </div>
        <!-- Portfolio Modals-->
        <!-- Portfolio Modal 1-->
        <div class="portfolio-modal modal fade" id="portfolioModal1" tabindex="-1" aria-labelledby="portfolioModal1" aria-hidden="true">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header border-0"><button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button></div>
                    <div class="modal-body text-center pb-5">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <!-- Portfolio Modal - Title-->
                                    <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0">Lab1:The Artemis board</h2>
                                    <!-- Icon Divider-->
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                        <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <h3 class=" text-center  mb-0">Blink it up</h3>
                                    <p class="mb-4">I use PWM to control the duty of LED. In loop function, the duty of LED is changed every 10 rounds.</p>
                                    <code >if (cnt == 10){cnt  =  0;}<br>
                                        if (light_on) {duty++;}<br>
                                        else {duty--;}}  <br>
                                      if (duty == 10) {light_on = 0;}<br>
                                      if (!duty) {light_on = 1;}<br>
                                      cnt++;<br>
                                      digitalWrite(LED_BUILTIN, HIGH);   // turn the LED on (HIGH is the voltage level)<br>
                                      delay(duty);                       // wait for duty/1000 second<br>
                                      digitalWrite(LED_BUILTIN, LOW);    // turn the LED off by making the voltage LOW<br>
                                      delay(10-duty);                    // wait for (10-duty)/1000 second
                                  </code>
                                    <div style="text-align: center;">
                                        <video width="400" height="375" class="fullscreen-video" controls="">
                                            <source class="text-center" src="assets/video/lab1/blinkItUp.mp4" type="video/mp4">
                                        </video>
                                    </div>
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <h3 class=" text-center  mb-0">Serial</h3>
                                    <p class="mb-4">Setup function: define the pin for UART and baud rate <br>
                                        Loop function: read the data from UART port and send to it.</p>
                                    <div style="text-align: center;">
                                        <video width="400" height="375" class="fullscreen-video" controls="">
                                            <source class="text-center" src="assets/video/lab1/serial.mp4" type="video/mp4">
                                        </video>
                                    </div>
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <h3 class=" text-center  mb-0">Analog Read</h3>
                                    <p class="mb-4">First initialize ADC pin for temperature detection and UART port for data transmission.<br>
                                        Then loop function reads the temperature from ADC pin, send to UART port and repeat over and over again.</p>
                                    <div style="text-align: center;">
                                        <video width="400" height="375" class="fullscreen-video" controls="">
                                            <source class="text-center" src="assets/video/lab1/analogRead.mp4" type="video/mp4">
                                        </video>
                                    </div>
                                    <div style="text-align: center;">
                                        <video width="400" height="375" class="fullscreen-video" controls="">
                                            <source class="text-center" src="assets/video/lab1/analogRead_PC.mp4" type="video/mp4">
                                        </video>
                                    </div>
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <h3 class=" text-center  mb-0">MicrophoneOutput</h3>
                                    <p class="mb-4">1.	Initialize UART and start PDM interrupts. <br>
                                        2.	Get audio data from pdmDataBuffer.<br>
                                        3.	Perform FFT on audio data.<br>
                                        4.	Output the loudest frequency.<br>
                                        </p>
                                    <div style="text-align: center;">
                                        <video width="400" height="375" class="fullscreen-video" controls="">
                                            <source class="text-center" src="assets/video/lab1/MicrophoneOutput.mp4" type="video/mp4">
                                        </video>
                                    </div>
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <h3 class=" text-center  mb-0">Turn on the LED when you whistle</h3>
                                    <p class="mb-4">1.	Initialize UART and LEDPIN and start PDM interrupts. <br>
                                        2.	Get audio data from pdmDataBuffer.<br>
                                        3.	If the sum of audio data is above the threshold, set LED on, otherwise off.<br>                                     
                                        </p>
                                    <div style="text-align: center;">
                                        <video width="400" height="375" class="fullscreen-video" controls="">
                                            <source class="text-center" src="assets/video/lab1/whistle.mp4" type="video/mp4">
                                        </video>
                                    </div>
                                    <!-- Portfolio Modal - Image-->
                                    <!-- <img class="img-fluid rounded mb-5" src="assets/img/portfolio/cabin.png" alt="..." /> -->
                                    <!-- Portfolio Modal - Text-->
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <button class="btn btn-primary" href="#!" data-bs-dismiss="modal">
                                        <i class="fas fa-times fa-fw"></i>
                                        Close Window
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio Modal 2-->
        <div class="portfolio-modal modal fade" id="portfolioModal2" tabindex="-1" aria-labelledby="portfolioModal2" aria-hidden="true">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header border-0"><button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button></div>
                    <!-- <div class="modal-body text-center pb-5"> -->
                        <div class="container">
                            <!-- <div class="row justify-content-center"> -->
                                <div class="col-lg-60">
                                    <!-- Portfolio Modal - Title-->
                                    <h3 class="portfolio-modal-title text-secondary text-center mb-0">Task 1</h3>
                                    <p class="mb-4">Send an ECHO command with a string value from the computer to the Artemis board, and receive an augmented string on the computer.</p>
                                    <code >
                                        char char_arr[MAX_MSG_SIZE];<br>

                                        // Extract the next value from the command string as a character array<br>
                                        success = robot_cmd.get_next_value(char_arr);<br>
                                        if (!success)<br>
                                            return;<br>
                                            
                                        tx_estring_value.clear();<br>
                                        tx_estring_value.append("Robot says -> ");<br>
                                        tx_estring_value.append(char_arr);<br>
                                        tx_estring_value.append(":)");<br>
                                        
                                        tx_characteristic_string.writeValue(tx_estring_value.c_str());<br>
                                        Serial.println(tx_estring_value.c_str());<br><br>
                                    </code>
                                    <p class="mb-4">In the Arduino side, the cmd_type in robot command send by computer is first extracted, 
                                        then the message of robot command is extracted, stored and inserted into tx_estring_value.<br>
                                        After that, Artemis will update this tx_characteristic_string in "RX_STRING" service where 
                                        my computer as a central device can read it</p>
                                    <img src="assets/video/lab2/task1.gif"  width="1000" />
                                    
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                    </div>

                                    <h3 class="portfolio-modal-title text-secondary text-center mb-0">Task 2</h3>
                                    <p class="mb-4">Send three floats to the Artemis board using the SEND_THREE_FLOATS command and extract the three float values in the Arduino sketch.</p>
                                    <code >
                                        float f_a, f_b, f_c;<br>

                                        // Extract the next value from the command string as an integer<br>
                                        success = robot_cmd.get_next_value(f_a);<br>
                                        if (!success)<br>
                                            return;<br>
                            
                                        // Extract the next value from the command string as an integer<br>
                                        success = robot_cmd.get_next_value(f_b);<br>
                                        if (!success)<br>
                                            return;<br>
                                            
                                        // Extract the next value from the command string as an integer<br>
                                        success = robot_cmd.get_next_value(f_c);<br>
                                        if (!success)<br>
                                            return;<br>
                                        Serial.print("Three floats: ");<br>
                                        Serial.print(f_a);<br>
                                        Serial.print(", ");<br>
                                        Serial.print(f_b);<br>
                                        Serial.print(", ");<br>
                                        Serial.println(f_c);<br>
                                        break;
                                    </code>
                                    <p class="mb-4">In the Arduino side, the cmd_type in robot command send by computer is first extracted, 
                                        then three float values are extracted through "robot_cmd.get_next_value()" function in order.
                                        After that, these float numbers are displayed on the serial monitor by "Serial.print()" function</p>
                                    <img src="assets/video/lab2/task2.gif"  width="1000" />
                                    
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                    </div>

                                    <h3 class="portfolio-modal-title text-secondary text-center mb-0">Task 3</h3>
                                    <p class="mb-4">Setup a notification handler in Python to receive the float value 
                                        from the Artemis board. In the callback function, store the float value into a (global) variable 
                                        such that it is updated every time the characteristic value changes. This way we do not have to 
                                        explicitly use the receive_float() function to get the float value.</p>
                                    <img src="assets/video/lab2/task3.png"   />
                                    <p class="mb-4">
                                        First define a global variable, float_value, and define notification_handler callback function in 
                                        which the float_value variable gets updated by ble.bytearray_to_float function. And then start the
                                         notify. Using asyncio.sleep from asyncio libaray, we can monitor the value of float_value when the 
                                         characteristic of RX_FLOAT service is updated.
                                    </p>
                                    <img src="assets/video/lab2/task3.gif"  width="500" />
                                    
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                    </div>

                                    <h3 class="portfolio-modal-title text-secondary text-center mb-0">Task 4</h3>
                                    <p class="mb-4">Briefly explain the difference between the two approaches to receiving a float value.<br></p>

                                    <p class="mb-4">A single float takes 4 bytes and a single string of length 1 takes 1 byte. 
                                        When sending data from Artemis to computer, the less number of bytes being sent, the more efficient the transmission would be.
                                        So when the number of bytes of data in string format is less than that in float format, the second approach is preferable in which 
                                        the rest of work of converting string to float is done by computer. Otherwise, the first approach is better.
                                    </p>

                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <h3 class="portfolio-modal-title text-secondary text-center mb-0">Effective Data Rate</h3>
                                    <p class="mb-4">Send a message from the computer and receive a reply from the Artemis board.
                                         Note the respective times for each event, calculate the data rate.<br></p>
                                    <img src="assets/video/lab2/task5.png"  />
                                    <p class="mb-4">I created a dataRate_handler callback function to calculate the time between message being sent and being received by computer.
                                        And I also commented out th write_data function in Artemis to ensure the accuracy.
                                    </p>
                                    <img src="assets/video/lab2/task5_2.png"  />
                                    <p class="mb-4">From this plot, we can estimate that the time consumed is proportional to the number of bytes of a message and ranges from 0.2 second to 0.8 second with respect to the number of bytes of a message.</p>
                                            
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <h3 class="portfolio-modal-title text-secondary text-center mb-0">Reliability</h3>
                                    <p class="mb-4">What happens when you send data at a higher rate from the robot to the computer? Does the computer read all the data published (without missing anything) from the Artemis board?</p>
                                    <img src="assets/video/lab2/task6.gif"  />
                                    <p class="mb-4">In Artemis, I set the interval to 0 in write_data function. This means that the data will be updated at a very high rate. And in my computer, I wrote another notification_handler
                                        to read and store the updated data from bulletin board. By this way, I was able to record the number of data sent by the robot and the number of data received by my computer. As seen in above gif 
                                        file, although data is sent at a higher rate, my computer is still able to read all the data without missing anything.
                                    </p>

                                </div>

                            <!-- </div> -->
                        <!-- </div> -->
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio Modal 3-->
        <div class="portfolio-modal modal fade" id="portfolioModal3" tabindex="-1" aria-labelledby="portfolioModal3" aria-hidden="true">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header border-0"><button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button></div>
                        <div class="container">
                            <!-- <div class="row justify-content-center"> -->
                                <div class="col-lg-40">
                                    <!-- Portfolio Modal - Title-->
                                    <h2 class="portfolio-modal-title text-secondary text-center text-uppercase mb-0">prelab</h2>
                                    <h6 class="mb-4">Think about which connections you want to be detachable and which can be permanent.</h6>
                                    <p class="mb-4">>I think all the connections between sensors and the Artemis should be detachable for cases when sensors are broken and I can still replace them.<br></p>
                                    <h6 class="mb-4">Think about which side of the sensors you mount the wires from.</h6>
                                    <p class="mb-4">>For ToF sensors, the wires should be connected from the back side of the infrared sensor chip, so it doesn't affect the distance detection.<br>
                                        >For IMU, the wires should be connected from the back of the flat side so that the sensor can be aligned with the x-y plane of the robot frame.<br></p>
                                    <h6 class="mb-4">Think about the placement of each sensor in the chassis and how long the wires have to be.</h6>
                                    <p class="mb-4">>IMU should be placed on the origin of xy-plane of the robot frame and parallel to the xy-plane.<br>
                                        >ToF sensors should be mounted on the front and rear of the car which enables the robot to detect the obtacles ahead and behind.</p>
                                    <center><img src="assets/video/lab3/prelab.png" class="centerImage"/></center>
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <h2 class="portfolio-modal-title text-secondary text-center text-uppercase mb-0">Lab 3(a): Time of Flight Sensors<br></h2>
                                    <h6 class="mb-4">1.Scan the I2C channel to find the sensor.</h6>
                                    <p class="mb-4"></p>>I loaded and burned Exampe1_wire program into the Artmeis. And the address I got was 0x29 which matched my expectation.
                                        Because I noticed the default I2C address of ToF was 0x52 from datasheet in prelab.0x52 in binary form is (01010010)B and 0x29 in binary form is (00101001)B.
                                        So 0x29 was just the result of shifting the address 0x52 one bit to the right. And I also used "getI2CAdress" function from SparkFun_VL53L1X
                                        libaray to get the address which was the default address 0x52.</p>
                                    <center><img src="assets/video/lab3/a_1.png"  /></center>

                                    <h6 class="mb-4">2.The ToF sensor has three modes, that optimize the ranging performance given the maximum expected range. 
                                        Discuss the pros/cons of each mode, and think about which one could work on the final robot.</h6>
                                    <p class="mb-4">>The VL53L1X has three distance modes: short, medium and long. Their maximum distances in dark are 136 cm, 290 cm, 300 cm respectively.
                                        Using the short mode will enable the robot to get the most accurate distance in short-range dark environment but  will limit the "visual"
                                        distance of the robot so that it cannot see farther obstacles and turn promptly. However, short mode provides the longest distance measurement
                                        under strong ambient light (135cm) compared to the other two modes (76/73 cm). So, short mode works best in strong light environment. As for the 
                                        medium mode and long mode, they both offer a longer detection range but behave badly under strong light. Since the longer the detecton range is, 
                                        the longer it takes to measure, the medium mode is preferable in dark. To conclude, I think the short mode is most suitable for our robots under 
                                        strong light and the medium mode is most suitable in dark and in normal environment.
                                        </p>
                                    
                                    <h6 class="mb-4">3.Test the long mode.</h6>
                                    <p class="mb-4">I tested the ToF from 100mm to 1300mm. It seems that the accuracy of ToF is still very high, the standard deviation of the error is 
                                        relatively small, and it flatuated from 1.1 mm to 1.6 mm.
                                    </p>
                                    <center><img src="assets/video/lab3/ToFRangeAccuracy.png" width="800" /></center>

                                    <h6 class="mb-4">4.Using notes from the pre-lab, hook up both ToF sensors simultaneously and demonstrate that both works.</h6>
                                    <p class="mb-4">>In setup function, I use two extra GPIO pins to control two ToF sensors on and off. I first use pin 9 to turn on and initialize the front sensor and use pin 10 to shutdown the rear sensor.
                                        Then I set the address of the front sensor to 0x10 and turn on and initialize the rear sensor. By doing so, ToF sensors get different I2C addresses.                                     
                                    </p>
                                    <code>  
                                        pinMode(9, OUTPUT);<br>
                                        pinMode(10, OUTPUT);<br><br>
                                      
                                        digitalWrite(9, HIGH);<br>
                                        digitalWrite(10, LOW);<br>
                                        if (frontSensor.begin() != 0) //Begin returns 0 on a good init<br>
                                        {<br>
                                          Serial.println("frontSensor failed to begin. Please check wiring. Freezing...");<br>
                                          while (1);<br>
                                        }<br>
                                        Serial.println("frontSensor online!");<br>
                                        frontSensor.setI2CAddress(0x10);<br><br>
                                        digitalWrite(10,HIGH);<br>
                                          if (RearSensor.begin() != 0) //Begin returns 0 on a good init<br>
                                        {<br>
                                          Serial.println("RearSensor failed to begin. Please check wiring. Freezing...");<br>
                                          while (1);<br>
                                        }<br>
                                        Serial.println("RearSensor online!");<br>
                                    </code>>
                                    <p class="mb-4">
                                        >The loop funcion lets both sensors start measurements.                                  
                                    </p>
                                    <code>
                                        frontSensor.startRanging(); //Write configuration bytes to initiate measurement<br>
                                        while (!frontSensor.checkForDataReady()) delay(0.1);<br><br>
                                        
                                        int frontDist = frontSensor.getDistance(); //Get the result of the measurement from the sensor<br>
                                        frontSensor.clearInterrupt();<br>
                                        frontSensor.stopRanging();<br><br>
                                      
                                        Serial.print("frontDistance(mm): ");<br>
                                        Serial.print(frontDist);<br><br>
                                      
                                        RearSensor.startRanging(); //Write configuration bytes to initiate measurement<br>
                                        while (!RearSensor.checkForDataReady()) delay(0.1);<br><br>
                                        
                                        int reartDist = RearSensor.getDistance(); //Get the result of the measurement from the sensor<br>
                                        RearSensor.clearInterrupt();<br>
                                        RearSensor.stopRanging();<br><br>
                                      
                                        Serial.print("\trearDistance(mm): ");<br>
                                        Serial.print(reartDist);<br>
                                      
                                        Serial.println();<br>
                                    </code>
                                    <center><img src="assets/video/lab3/twoToF.gif"/></center><br>

                                    <h6 class="mb-4"  text-center >Additional Tasks</h6>
                                    <h6 class="mb-4">1. Many distance sensors are based on infrared trasmission. Discuss a couple, highlight the differences
                                     in their fuctionality and the pros/cons of each.</h6>
                                    <p>There are two types of infrared sensors: active and passive. Active infrared sensors are linear-controlled 
                                        detectors, and their control range is a narrow and long space with a linear distribution. The active infrared sensor also
                                        has the advantages of small size, light weight, low power consumption, easy operation and installation, and
                                        low price. Since the lens surface of the optical system is exposed in the air, it is easily contaminated by dust
                                        and other sundries. The passive infrared sensor itself does not emit any energy but passively receives and detects infrared radiation
                                        from the environment. Once the human body infrared radiation comes in, the pyroelectric device will generate a sudden
                                        change of electrical signal after being focused by the optical system, and an alarm will be issued. In the digital passive infrared
                                        sensors, the weak electrical signal output by the pyroelectric sensor is directly input to a powerful microprocessor, and all signal 
                                        conversion, amplification, filtering, etc. are carried out in a processing chip, thereby improving the passive infrared sensor's reliability.
                                        Cons: When the equipment is not firmly installed, when the temperature difference between indoor and outdoor is large, or when multiple sensors 
                                        transmit signals at the same time, it is easy to cause false alarms. 
                                    </p>
                                    
                                    <h6 class="mb-4">2.Try out some settings of timing budgets, and discuss your choice of settings related to the anticipated speed of your robot. </h6>
                                    <p>Accoarding to 2.5.2 in the datasheet, increasing the timing budget increases the maximum distance the device can range and improves the repeatability error. However, average consumption
                                        augments accordingly. Since I choose the long mode, I want to make the range of ToF as large as possible, while
                                        the time budget is small. 140 ms is the timing budget which allows the maximum distance of 4 m to reached under long distance mdoe.</p>
                                    <center><img src="assets/video/lab3/mdaretb.png"/></center><br>
                                    <p>Accoarding to this figure of maximum distance vs different timing budget from datasheet, I tried 140 ms timing budget and 200 ms under long distance.</p>
                                    
                                    <center><img src="assets/video/lab3/140long.gif"/></center><br>
                                    <p>The above picture is the test result of setting the timing budget to 140ms in long mode. It can be seen that, its easurement time, internal measurement period and singal rate was 
                                        around 96 ms, 100ms and 2500 respectively.</p>
                                    <center><img src="assets/video/lab3/200long.gif"/></center><br>
                                    <p>The above picture is the test result of setting the timing budget to 200ms in long mode. It can be seen that, its easurement time, internal measurement period and signal rate was 
                                        180 ms, 100ms and 1000 respectively. <br>
                                        Through the above tests, it can be seen that when both timimg budgets can achieve the same long-distance measurement, the tb of 140ms can obtain data updates with higher frequency
                                        , and I also noticed that using the tb of 200ms is more prone to signal fail. So in the following experiments I will choose long mode and tb of 140 ms.</p>

                                    <h6 class="mb-4">3. Try rapidly changing the distance from the sensor to an object and describe what happens. Consider how this will impact your motion implementation in future labs.</h6>
                                    <p>I programmed the StatusandRate program to Artemis. After testing, I found that when the ToF distance measurement is relatively small (the obstacles ahead are relatively close), 
                                    the measurement status is generally accurate, and the status is basically good.</p>
                                    <center><img src="assets/video/lab3/short.gif"/></center><br>
                                    <p>When the ToF distance measurement is relatively large (the obstacles ahead are relatively far), 
                                        the measurement status is generally accurate, and the status is basically good.</p>
                                    <center><img src="assets/video/lab3/long.gif"/></center><br>
                                    <p>This result made me realize that using ToF When measuring distances, the measurement at close range is more reliable, and when the distance is farther, use ToF less.</p>
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <h2 class="portfolio-modal-title text-secondary text-center text-uppercase mb-0">Lab 3(b):IMU<br></h2>
                                    <h6 class="mb-4">1.Setup the IMU</h6>
                                    <p>I connected the IMU to the Artmeis board using I2C wiring, ran Example1_Basics.<br>
                                    AD0_VAL is the value of the last bit of the I2C address. On the Sparkfun 9DoF IMU breakout the default is 1, and when the ADR jumper is closed the value becomes 0.
                                    When AD0_VAL equals 1, the Artmeis could not find IMU through I2C. When AD0_VAK equals 0, it worked.<br>
                                    </p>
                                    <p>
                                        When IMU was placed on my table, it measured 0g on the x and y axes and +1g on the z axis. Here are the results of accelerometer when I rotated the IMU around the x and y axes.
                                        But when I rotated the IMU around z axis, it was unable to distinguish between that and the acceleration provided through Earth's gravitational pull. This is because the 
                                        accelerometer can only gauge the orientation of a stationary item with relation to Earth's surface. 
                                    </p> 
                                    <center><img src="assets/video/lab3/acctest.gif"/></center><br>
                                    <p> Here are the results of gyroscope when I rotated the IMU around the x, y and z axes. The gyroscope worked well around these axes.</p>
                                    <center><img src="assets/video/lab3/gyrotest.gif"/></center><br>

                                    <h6 class="mb-4">2. Accelerometer</h6>
                                    <h6 class="mb-4">2.1.  Use the equations from class to convert accelerometer data into pitch and roll.</h6>
                                    <p>I used atan2 and M_PI to compute pitch and roll.</p>
                                    <code>
                                        float  rollRad = atan2(sensor->accY(), sensor->accZ()) ;<br>
                                        float  rollDegree = rollRad * 180 / M_PI ;<br><br>

                                        float  pitchRad = atan2(sensor->accX(), sensor->accZ());<br>
                                        float  pitchDegree = pitchRad * 180 / M_PI;<br><br>

                                        SERIAL_PORT.print("Roll: ");<br>
                                        printFormattedFloat(rollDegree, 5, 2);<br><br>
                                        
                                        SERIAL_PORT.print("\t\tPitch: ");<br>
                                        printFormattedFloat(pitchDegree, 5, 2);<br><br>
                                    </code>
                                    <center><img src="assets/video/lab3/pitchroll.gif"/></center><br>
                                    <p>When the actual angle was 90 and -90, my test result was:<br> pitch: [83,-83], roll: [90,-84]<br>
                                    So I scaled the original pitch value by 90/83, and used 1.0405 * Roll - 3.6416 to make the final roll value match the expected output.  
                                    </p>
                                    <h6 class="mb-4">2.2. Try tapping the sensor and plot the frequency response.</h6>
                                    <p>I saved the accelerometer data through CoolTermWin software and did fft in jupyter lab.</p>
                                    <img src="assets/video/lab3/codeTap.png"/>
                                    <center><img src="assets/video/lab3/tapaccX.png"/><img src="assets/video/lab3/tapaccY.png"/></center>
                                    <p>From these figures, I couldn't decide the cutoff frequency in low pass filter. So I performed FFT on the data from accelerometer when I rotated IMU.</p>
                                    <center><img src="assets/video/lab3/normalX.png"/></center>
                                    <p>From this frequency response plot, I think the cutoff frequency is around 10 Hz. My computer recieved 297 samples in 9.5 seconds, 
                                        so the sampling rate is 297/9.5 = 31.2632. Given that fc = 1/(2piRC), T=1/sample_rate, alpha=T/(T+RC), I get T = 0.03198, RC = 1/(20pi), alpha = 0.6677.
                                        Using these parameters, I am able to design a low pass filter:
                                    </p>
                                    <center><img src="assets/video/lab3/lpf.png"/></center>
                                    <p>Alpha determines how much LPF trusts new signal, the higher the alpha, the more high frequency content the filtered signal has</p>

                                    <h6 class="mb-4">3. Gyroscope</h6>
                                    <h6 class="mb-4">3.1. Use the equations from class to compute pitch, roll, and yaw angles from the gyroscope.</h6>
                                    <img src="assets/video/lab3/codegyr.png"/>
                                    <p><br>I can monitor the values of original roll, filtered roll from accelerometer and original roll from gyroscope in Serial Plotter.</p>
                                    <center><img src="assets/video/lab3/plotrolls.png"/></center>
                                    <p>I can also monitor the values of original pitch, filtered pitch from accelerometer and original pitch from gyroscope in Serial Plotter.</p>
                                    <center><img src="assets/video/lab3/plotpitchs.png"/></center>
                                    <p><br>I found that roll and pitch from accelerometer have more high frequency content, while roll and pitch from gyroscope change more smoothly. 
                                        The values of roll and pitch from gyroscope are related to the initial placement angle of IMU and have errors, which will accumulate over time.
                                    </p>
                                    <p> When I try to lower the sampling frequency, I find that the error of roll and pitch from gyroscope got larger.</p>   
                                    
                                     <h6 class="mb-4">3.2. Use a complimentary filter to compute an estimate of pitch and roll which is both accurate and stable. </h6>
                                    <center><img src="assets/video/lab3/codecompli.png"/></center>
                                     
                                    <p>After using a complimentary filter, from the figure, we can see that the angles (in purple) have a lot less spikes, become relatively stable, and no longer have the drift effect.</p>
                                    <center><img src="assets/video/lab3/compli.png" width="750"/></center>
                                    <h6 class="mb-4"><br>3.3 additional task: use the equations from class to convert magnetometer data into a yaw angle.<br></h6>
                                    <p>I used equation given in the lab description to compute yaw value from Magnetometer. Yaw value was 0 when I placed x axis of IMU towards north, and changed when I rotated it around z-axis. 
                                        I also noticed that yaw value was robust to small changes in pitch.
                                    </p>
                                    <center><img src="assets/video/lab3/mgyaw.png" width="750"/></center>
                                    


                                </div>
                            <!-- </div> -->
                        </div>
                </div>
            </div>
        </div>
        <!-- Portfolio Modal 4-->
        <div class="portfolio-modal modal fade" id="portfolioModal4" tabindex="-1" aria-labelledby="portfolioModal4" aria-hidden="true">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header border-0"><button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button></div>
                    <!-- <div class="modal-body text-center pb-5"> -->
                        <div class="container">
                            <!-- <div class="row justify-content-center"> -->
                                <div class="col-lg-40">
                                    <!-- Portfolio Modal - Title-->
                                    <h2 class="portfolio-modal-title text-secondary text-center text-uppercase mb-0">prelab</h2><br>
                                    <!-- Icon Divider-->
                                    <p>To let Artemis be powered by a battery, I replaced the black male connector from the battery with the white 2mm JST connector 
                                        and made sure the connector was polarized correcly. And the Artmeis worked while being powered by the 600mAh battery.
                                    </p>
                                    <center><img src="assets/video/lab4/prelab.jpg" width="600" /></center><br>

                                    <h6>(A) What are the dimensions of the car?</h6>
                                    <p>
                                        By measuring the car with a tape measure, I got the dimension of the car: [14.3cm 17.8cm 7.8cm].
                                    </p>
                                    <center><img src="assets/video/lab4/x.jpg" width="300" /></center><br>
                                    <center><img src="assets/video/lab4/y.jpg" width="300" /></center><br>
                                    <center><img src="assets/video/lab4/z.jpg" width="300" /></center><br>

                                    <h6>(B) What is the range of speed?</h6><br>
                                    <p>In order to estimate the range of car speed, I attached a ToF sensor on the front of the car with double-sided tape, 
                                        which is used to measure the distance of obstacles in front of the car. </p>
                                    <center><img src="assets/video/lab4/tof.jpg" width="500" /></center><br>
                                    <p>And then set up the Artemis to send ToF distance measurement to the computer over Bluetooth. By doing so, I could monitor 
                                        and store the distance data while speeding up the car with remoter. Since the speed of range is battery-dependent, 
                                        I used a fully charged one to test. On the computer end, I set up a notification handler to store the distance data with time stamps.<br></p>
                                    <center><img src="assets/video/lab4/handler.jpg" width="800" /></center><br>
                                    <p>Then I positioned the car around 4 meters away from the door and speeded it up until it hit the door (pillows for cushioning).</p>
                                    <center><img src="assets/video/lab4/distance.png" width="650" /></center><br>
                                    <p>By taking the derivative of the distance respect to time, I got the plot of the speed of the car. In this plot, we can find that there is 
                                        a desired acceleration and a deceleration process caused by hitting the pillowss. And we are able to estimate that the speed range is 
                                        -3.7 to 3.7 meters per second (the car is able to move in both directions).
                                    </p>
                                    <center><img src="assets/video/lab4/speed.png" width="650" /></center><br>

                                    <h6>(B) What is the range of acceleration?</h6><br>
                                    <p>Since we already have the plot of the car speed, we can take advantage of it to estimate the car acceleration by 
                                        taking its derivative. According to the plot below, I estimated that the acceleration of the car ranges from -7 m/s^2 to
                                    7 m/s^2
                                    </p>
                                    <center><img src="assets/video/lab4/acceleration.png" /></center><br>


                                                               

                                    
                                
                                </div>
                            <!-- </div> -->
                        </div>
                    <!-- </div> -->
                </div>
            </div>
        </div>
        <!-- Portfolio Modal 5-->
        <div class="portfolio-modal modal fade" id="portfolioModal5" tabindex="-1" aria-labelledby="portfolioModal5" aria-hidden="true">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header border-0"><button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button></div>
                        <div class="container">
                            <div class="col-lg-40">
                                <!-- Portfolio Modal - Title-->
                                <h2 class="portfolio-modal-title text-secondary text-center text-uppercase mb-0">prelab</h2>
                                <p>1. What pins will you use for control on the Artemis?<br>
                                >I will use A0, A1 for left motor driver and A2, A3 for right motor driver.<br>
                                </p>

                                <p>2. We recommend powering the Artemis and the motor drivers/motors from separate batteries. Why is that?<br>
                                    >Because the motor driver needs large current, and Artemis uses small digital signal, 
                                    separating the two power supplies can protect the Artemis digital signal from being affected by the motor drive current.<br>
                                </p>

                                <h2 class="portfolio-modal-title text-secondary text-center text-uppercase mb-0">Lab Procedure</h2>
                                <p>1. Connect the necessary power and signal inputs to run one motor driver from the Artemis.<br>
                                    What are reasonable settings for the power supply?<br>
                                </p>
                                <center><img src="assets/video/lab5/OperateCurrent.png" width="750"/></center>
                                <p>>I looked throught the datasheet of the motor driver, and found the recommended DC output current per bridge. So I set the external 
                                    currnet supply to 1 A.
                                </p>

                                <p>2. Use analogWrite commands to generate PWM signals and show that you can regulate the power on the output for the motors.<br>
                                >I used analogWrite commands to change the duty cycle of the PWM and monitor the output of the motor drive in oscilloscope. From the oscilloscope,
                                I could see that the duty cycle of the PWM was changing and the PWM frequency was around 183 Hz.
                                </p>
                                <center><img src="assets/video/lab5/codeexternal.png" width="750"/></center>
                                <center><img src="assets/video/lab5/analogWrite.gif" width="750"/></center>
                                
                                <p>3. 4. 5.Place your car on its side, such that the spinning wheels are elevated, and show that you can run the motor in both directions.</p>
                                <center><img src="assets/video/lab5/oneside.gif" /></center>
                                <p>6. Repeat the process for the second motor and motor driver.</p> 
                                <center><img src="assets/video/lab5/twosides.gif" /></center>
                                <p>7.Install everything inside your car chassis, and try running the car on the ground. Here's how I hook up my car.</p>
                                <center><img src="assets/video/lab5/20220309154214.png" width="450" /></center>

                                <p>8. Explore the lower limit for which each motor still turns while on the ground.<br>
                                    >I gradually increased the duty cycle, and at first the robot car stood still and made a vibration-like noise. When the duty cycle is
                                        increased to 15%, the cart starts to move.
                                </p> 
                                <center><img src="assets/video/lab5/limitmove.gif" /></center>
                                <p>9. If your motors do not spin at the same rate, you will need to implement a calibration factor. To demonstrate that your robot can move 
                                    in a fairly straight line, record a video of your robot following a straight line (e.g. a piece of tape) for at least 2m/6ft. 
                                    >The robot should start centered on the tape, and still partially overlap with the tape at the end.<br>
                                Before calibration, The car would turn slightly to the left.
                                </p>
                                <center><img src="assets/video/lab5/wai.gif" /></center>
                                <p>So I scaled the output duty cycle of right motor by 0.95. Then the robot car was able to move in a straight line.</p>
                                <center><img src="assets/video/lab5/zhi.gif" /></center>

                                <p>10. Demonstrate open loop, untethered control of your robot - add in some turns. <br>
                                >I first wrote a motor_control function to control the output of the two motors. In the function, I first set the limits range of duty cycle values to 
                                between -255 and 255 given that the resolution of analogWrite output is 8-bit, and then controlled the left and right motors respectively. 
                                Forward if the input is an positive integer and vice versa.
                                </p>
                                <center><img src="assets/video/lab5/codemotorcontrol.png" /></center>
                                <p>In a open control loop, the robot first moves forward for 1 second by setting duty cycles of two PWM signals to 78%. Then the robot would turn left 
                                    at a large angular speed by setting left duty cycle to -100% and the other one to 100%.  </p> 
                                <center><img src="assets/video/lab5/codeopenloop.png" /></center>
                                <center><img src="assets/video/lab5/opencontrol.gif" /></center><br>

                                <h6>Additional tasks for ECE5960 students</h6>
                                <p>1. Consider what frequency analogWrite generates. Is this adequately fast for these motors? Can you think of any benefits to manually configuring 
                                    the timers to generate a faster PWM signal?<br>
                                    >From part 2. in the oscilloscope, I could see that the duty cycle of the PWM was changing and the PWM frequency was around 183 Hz. This indicates 
                                    that the motor control signal could change its value in 5 ms and it's much faster than the motor response time and fast enough to control the motor. 
                                    So generating a faster PWM signal would not bring any benefits.
                                </p>

                                <p>2. Write a program that ramps up and down in speed slowly. Reporting the values to your computer using Bluetooth either during operation or when 
                                    your ramp up/down procedure is over. Use this setup to document accurately what range of speeds you can achieve.<br>
                                    >Since the maximum effective distance of ToF is 4 meters, I judged that this distance could not allow the car to complete the entire ramp up/down process, 
                                    so I chose to set the duty cycle, from small to large, and experimented multiple times within the range of four meters.<br>
                                    </p>
                                <P>I designed this experiment to send a duty cycle command from the computer through Bluetooth communication, and the car moves forward and returns ToF distance 
                                    measurement every 300ms (according to lab2, I set the time budget of distance measurement to 140ms, so 300ms is enough for the car to obtain Distance data), the 
                                    car stops after moving forward 4 meters; the distance sequence is derived on the computer to obtain the speed of the car.<br></P>
                                    <center><img src="assets/video/lab5/codeA21.png" /></center>
                                    <center><img src="assets/video/lab5/codeA22.png" /></center><br>
                                <p>Here are the representative plots of distance and speed given duty cycles of 23.52%, 31,37%, 39,21%, 54.90%, 70,58% and 86.27%.</p>
                                <center><img src="assets/video/lab5/60.png" /></center>
                                <center><img src="assets/video/lab5/80.png" /></center>
                                <center><img src="assets/video/lab5/100.png" /></center>
                                <center><img src="assets/video/lab5/140.png" /></center>
                                <center><img src="assets/video/lab5/180.png" /></center>
                                <center><img src="assets/video/lab5/220.png" /></center>
                                <p>Observing the last plot, I find that when the duty cycle is large enough, the speed of the car couldn't meet its maximum within 4 meters. So this 
                                    limitation prevented me from estimating the full range of the speed given different duty cycles. However, I could get a approximate one as the plot
                                    below.</p>
                                <center><img src="assets/video/lab5/range_speed.png" /></center>
 
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Portfolio Modal 6-->
        <div class="portfolio-modal modal fade" id="portfolioModal6" tabindex="-1" aria-labelledby="portfolioModal6" aria-hidden="true">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header border-0"><button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button></div>
                        <div class="container">
                            <div class="col-lg-40">
                                <h3 class="text-secondary text-center text-uppercase mb-0" >prelab</h3>
                                <p>1. Have the robot controller to start on an input from your computer sent over Bluetooth.<br>
                                    &emsp; I added a START command to start/pause pid computation and motor driver.
                                </p>
                                <center><img src="assets/video/lab6/start.png" /></center>
                                <p>2. I added the command to send the pid parameter to tune the PID controller in real time 
                                    without loading code again. Upon completion of the behavior, 
                                    send the debugging data back to the computer over Bluetooth. <br></p>
                                <center><img src="assets/video/lab6/tofreading.png" /></center>
                                <center><img src="assets/video/lab6/gyro&yaw.png" /></center>
                                <center><img src="assets/video/lab6/dutycycle.png" /></center>
                                <p>3. By using the EString class, I was able to pass some useful information to 
                                    the computer via bluetooth, such as initialization status.</p>
                                <center><img src="assets/video/lab6/init.png" /></center><br>

                                <h3 class=" text-center text-uppercase mb-0">Task A: Dont Hit the Wall!!</h3><br>
                                <h6>PID controller:</h6>
                                <p>I used arduino PID library to design distance controller. I set the output limits of distance controller to -255 to 255, 
                                    Taking front ToF reading as input and motor duty cycle as output, the negative feedback control of distance is realized.
                                    One of the reason that I chose this library to implement PID control is that its build-in function has already taken care of Derivative kick
                                    problem.
                                    In addition, I also simply designed a z-axis angular acceleration PID controller with gyroscope reading as input and motor duty cycle as 
                                    output. The output of this controller is superimposed on the duty cycle of the left and right motors, one positive and one negative, 
                                    so as to ensure that the robot runs straight ( need to implement a calibration factor to both motor)
                                </p>
                                <h6>Frequency:</h6>
                                <p>by logging all data (time stamped sensor values and motor outputs),  I calculated that the average time to execute a loop is about 323 ms</p>

                                
                                <h6>Deadband:</h6>
                                <p>I wrote a scaling function that converts the output from your PID controller to an output for which the motors can actually react.
                                    And I set the deacband of both motors from -30 to 30.
                                </p> 
                                <center><img src="assets/video/lab6/deadban.png" /></center><br>
                                <h6>Motor drivers:</h6>
                                <p>When I tried Task A, at first I found that the motor was very slow to respond. Later I found that when I was dealing with coasting 
                                    and active breaking modes, I set the active breaking modes to be used when the duty cycle is 0. So when I set it to coasting modes, the problem was solved.</p>

                                <h6>A reasonable range of the proportional controller gain:</h6>
                                <p>The robot is initially placed from 2 meters to 4 meters away from the obstacle, and the target distance is 300mm. Then the maximum value of error in the initial 
                                    state is -3700. At the same time, due to the scaling function of motors, the maximum duty cycle given is 225, then the maximum proportional gain can be calculated
                                    as Kp = 225/3700 = 0.06. So the actual Kp value must be smaller than this value, but in the same order of magnitude. So I started tuning from 0.01.</p> 
                                
                                <h6>The range and sampling time for TOF sensor:</h6>
                                <p>According to lab 3, I discovered that to make the range of ToF as large as possible, while the time budget is small. 140 ms is the timing budget which allows 
                                    the maximum distance of 4 m to reached under long distance mdoe. Therefore I set the ToF to long distance mode and 140 ms budget time.</p>

                                <h6>Parameter Tuning:</h6>
                                <p>Because the integral part of PID Controller will always introduce overshoot, which will increase the risk of the robot hitting the wall, so I use PD control, 
                                    Kp adjusts the response speed of the robot, and Kd suppresses overshoot. Also I found out that the initial position at different distances requires different PD parameters.
                                    The farther the distance is, the Kp needs to be reduced accordingly, otherwise the robot will hit the wall.</p>

                                <h6>2 meters:</h6>

                                <p> &emsp;Kp = 0.025, Kd = 0.015,As shown in the figures below, the controller can effectively control the robot to move to the 300mm position, 
                                    and the maximum speed in the process is 1.15 m/s</p>
                                <center><img src="assets/video/lab6/2m1.png" /></center><br>
                                <center><img src="assets/video/lab6/speed2m1.png" /></center><br>
                                <center><img src="assets/video/lab6/2m1v.gif" width="450" /></center><br>

                                <p> &emsp;Kp = 0.028, Kd = 0.015,As shown in the figure below, the robot drives to the 300mm position more quickly, and the maximum speed was 
                                    also increased to 1.67 m/s, but increasing the kp significantly increased the overshoot</p>
                                <center><img src="assets/video/lab6/2m2.png" /></center><br>
                                <center><img src="assets/video/lab6/speed2m2.png" /></center><br>

                                <h6>3 meters:</h6>

                                <p> &emsp;Kp = 0.020, Kd = 0.010,As shown in the figures below, the controller can effectively control the robot to move to the 300mm position, 
                                    and the maximum speed in the process is 1.19 m/s</p>
                                <center><img src="assets/video/lab6/3m1.png" /></center><br>
                                <center><img src="assets/video/lab6/speed3m1.png" /></center><br>

                                <p> &emsp;Kp = 0.022, Kd = 0.012,As shown in the figure below, the robot drives to the 300mm position more quickly, and the maximum speed was 
                                    also increased to 1.70 m/s, but increasing the kp significantly increased the overshoot</p>
                                <center><img src="assets/video/lab6/3m2.png" /></center><br>
                                <center><img src="assets/video/lab6/speed3m2.png" /></center><br>
                                <center><img src="assets/video/lab6/3m1v.gif" width="450" /></center><br>

                                <h6>4 meters:</h6>

                                <p> &emsp;Kp = 0.022, Kd = 0.012 As shown in the figures below, the controller can effectively control the robot to move to the 300mm position, 
                                    and the maximum speed in the process is 2.176 m/s</p>
                                <center><img src="assets/video/lab6/4m1.png" /></center><br>
                                <center><img src="assets/video/lab6/speed4m1.png" /></center><br>
                                <center><img src="assets/video/lab6/4m1v.gif" width="450" /></center><br>

                                <p>Through this series of parameter adjustments, I was able to design a reasonable PD controller to make the robot drive from a distance 
                                    of 2 to 4 meters away from the wall to a position of 300mm, and I found that the maximum speed that the robot can achieve is 
                                    largely affected by the initial The effect of position, the further away from the wall, the greater its maximum speed.</p>

                                <center><img src="assets/video/lab6/table.png" /></center><br>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

 <!-- Portfolio Modal 6-->
 <div class="portfolio-modal modal fade" id="portfolioModal7" tabindex="-1" aria-labelledby="portfolioModal7" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header border-0"><button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button></div>
                <div class="container">
                    <div class="col-lg-40">
                        <h6 class="text-secondary  text-uppercase mb-0" >1. Step Response</h6>
                        <p>&emsp;Considering that the Kalman Filter will be combined with PID control in future experiments, I will keep the scaling function for motor output when doing the step response test.<br></p>
                        <p>First I set the input of motor to 70 and here are the ToF readings, calculated speed and motor input.</p>
                        <center><img src="assets/video/lab7/70.png" /></center><br>
                        <center><img src="assets/video/lab7/70motor.png" /></center><br>
                        <p>From the figrues above, we can have that the steady state of the speed is around 1500 mm/s. And given the motor input is 70, d = u/v = 70/1500 = 0.04667<br>
                            Then I measured 90% rise time, it would be 784 ms or 0.784s. Therefore m = 0.01589
                        </p>
                        <center><img src="assets/video/lab7/ABC.png" /></center><br>

  
                        <h6 class="text-secondary  text-uppercase mb-0" >2. Kalman Filter Setup</h6>
                        <p>First try to reason about ballpark numbers for the variance of process and measurement. And we know that their relative values determines how much you trust your model versus your sensor and
                            the process noise is dependent onf sampling rate. I averaged the sampling rate and got 10.21 ms per sample
                        </p>
                        <center><img src="assets/video/lab7/nosie.png" /></center><br>

                        <h6 class="text-secondary  text-uppercase mb-0" >3. Sanity Check Your Kalman Filter</h6>
                        <p>In order to implement Kalman Filter on the computer, I define the kf function, whose input are mu at last time, sigma at last time, u(input), y(measurement), 
                            Ad (discrete A matrix), Bd (discrete B matrix) and C matrix</p>
                        <center><img src="assets/video/lab7/kf.png" /></center><br>
                        <p>Loop through all of the data from my pre-recorded run, while calling this kf function.</p>
                        <center><img src="assets/video/lab7/loop.png" /></center><br>
                        <p>After the first run, I get the following plot. The KF estimate in the figure is almost the same as the ToF reading, indicating 
                            that the Kalman filter trusts the results of the ToF reading very much at this time, I should increase the measurement noise Sigma_z.</p>
                        <center><img src="assets/video/lab7/pyekf1.png" /></center><br>
                        <p>Next I increased the measurement noise from 40 to 400. Below is the plot I get.In this figure, I found that the waveform of KF is much smoother than the previous one, 
                            and is closer to the actual state than ToF reading (because the sampling rate is higher than the frequency of ToF data acquisition, the ToF reading curve looks a little more discrete).
                            It shows that Kalman Filter is less confident in ToF measurement than before, and can better balance expected measurement and actual measurement.</p>
                        <center><img src="assets/video/lab7/pyekf2.png" /></center><br>

                        <h6 class="text-secondary  text-uppercase mb-0" >4. Implement the Kalman Filter on the Robot</h6>
                        <p>First, I included the BasicLinearAlgebra library and wrote the Kalman filter function according to part 3.</p>
                        <center><img src="assets/video/lab7/code.png" /></center><br>

                        <p> In each iteration, the general loop time is within 0.005-0.03s (5-30ms). When assigning a value to Delta_t, because this value is too small and the Matrix precision is limited, 
                            the Delta_t matrix will become 0. So I modified the library function and changed the data type of all matrices from float to double, and the problem was solved.</p>
                        <p> Then I found that mu and Sigma both became NaN after the second iteration. It took me a long time to find out that the inversion of a 1by1 matrix in the BasicLinearAlgebra 
                            library incorrectly returns 1. But fortunately, the inverse matrix is exactly 1by1, and I can directly divide by sigma_m when calculating Kalman Gain, instead of inverting it.</p>
                        <p>Here is the plot of ToF reading and KF estimate. Orange: KF estimate; Blue: ToF reading.</p>
                        <center><img src="assets/video/lab7/kfc0.1.png" /></center><br>
                        <p>Then I found that although the KF estimate will eventually approach the ToF reading, the KF estimate will increase to around 2500 at first. 
                            So I wondered if the value I initialized KF sigma was too large, because sigma represents the uncertainty of estimate. So I made two additional attempts, setting the sigma to a 
                            very large value and a very small value</p>
                        <center><img src="assets/video/lab7/kfc1000.png" /></center><br>
                        <center><img src="assets/video/lab7/kfc0.001.png" /></center><br>
                        <p>But the results were even worse. So it shouldn't be an initialization problem. Then I thought that Delta_T needs to be calculated for each iteration of KF, 
                            maybe the Delta_T calculated for the first time is too large, because in the first calculation, Delta_T is calculated by the current time (acquired from the function millis())  
                            minus the previous time acquired from the function millis() in setup function, so I did a modification: in the first KF iteration, run through all Kalman filter 
                            calculations except updating mu and sigma just to get the previous time. The rest of the iterations remain the same. Fortunately, with such modification, the problem is solved.
                        Here are the plots of ToF readings and KF estimate. I also zoomed in on a section where the filtering effect of the KF estimate can be better observed. </p> 
                        <center><img src="assets/video/lab7/kfsuccess1.png" /></center><br>
                        <center><img src="assets/video/lab7/kfsuccess2.png" /></center><br>





                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="portfolio-modal modal fade" id="portfolioModal9" tabindex="-1" aria-labelledby="portfolioModal9" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header border-0"><button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button></div>
                <div class="container">
                    <div class="col-lg-40">
                        <h6 class="text-secondary  text-uppercase mb-0" >1. Orientation control</h6>
                        <p>&emsp;By using Arduino PID library, I created a PID controller that allows the robot to do on-axis turns in small, accurate increments. The robot was enabled to 
                            have 20 readings (18 degree increments) per 360 degree.</p>
                        <center><img src="assets/video/lab9/Orientation.png" /></center><br>
                        <p>As shown in the figure above, the yaw value acquired from IMU was tracking the value of angle_set. And it's sufficient to perform the orientation control.</p>
                        <center><iframe width="700" height="600" src="https://www.youtube.com/embed/GWla4vXH5CI" frameborder="0" allowfullscreen></iframe></center><br>
                        <p>In order to minimize the noise of the IMUsensor, during initialization, when the robot remains static, I record the value of the gyroscope in the z-axis a 
                            thousand times, and take the average value as the offset. So I think my angle information is more accurate. After my many attempts, the robot rotates a circle, 
                            and the angle measurement value will have a maximum error of 10 degrees. When the robot rotates a circle under the orientation control, it will drift. In some cases, 
                            it will cause the robot to be 0.5 feet (0.1524 m) away from the origin. Therefore, in the worst case, there will be an error of 0.67 m, but generally this is not the case.</p>
                        
                        <h6 class="text-secondary  text-uppercase mb-0" >2. Read out Distances</h6>
                        <p>&emsp;I will wait for a short while after sending a new angle command, let the robot read the ToF reading, and let the robot send back the 
                            distance data through Bluetooth. After testing, I set the waiting time to 2.5 seconds.</p>
                            <center><img src="assets/video/lab9/wait.png" /></center><br>
                        <p>Sanity Check: <br>
                            &emsp;I put the robot in a corner of my apartment. The robot obtains ToF reading under orientation control. As shown in 
                            the picture below, the shape in the picture conforms to the shape of the corner of the wall. So the program should work.</p>
                        <center><img src="assets/video/lab9/polar.png" /></center><br>
                        
                        <h6 class="text-secondary  text-uppercase mb-0" >3. Merge and Plot your readings</h6>
                        <p>I placed the robot on five points of the lab, and executed the ToF reading under orientation control.</p>                       
                        <center><iframe width="700" height="600" src="https://www.youtube.com/embed/knJcqjWWbHE" frameborder="0" allowfullscreen></iframe></center><br>
                        <center><iframe width="700" height="600" src="https://www.youtube.com/embed/x9PzDSno6MA" frameborder="0" allowfullscreen></iframe></center><br>
                        <p>By taking the IMU pose in the robot frame and using the transformation matrices, I managed to plot all of TOF sensor readings in a single plot.</p>
                        <center><img src="assets/video/lab9/map.png" /></center><br>


                        <h6 class="text-secondary  text-uppercase mb-0" >4. Convert to Line-Based Map</h6>
                        <p>&emsp;The errors in the map I got mainly exist near the two largest boxes. I corrected some points according to the position and side length of the actual boxes.</p>
                        <center><img src="assets/video/lab9/processed map.png" /></center><br>


                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="portfolio-modal modal fade" id="portfolioModal10" tabindex="-1" aria-labelledby="portfolioModal10" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header border-0"><button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button></div>
                <div class="container">
                    <div class="col-lg-40">
                        <h6 class="text-secondary  text-uppercase mb-0" >1. </h6>
                        <p>&emsp;There are simulated robot and map in the simulator, in which the robot also displays the data of the distance sensor. We can control the linear velocity and angular velocity of the 
                            robot with the arrow keys, and stop the robot from moving with the space key.More importantly, we can control the robot through the Commander class. We can obtain the relevant 
                            information of the robot through get_pose, get_sensor, and realize functions such as localization. There is also the set_vel function to control the linear and angular velocity of the robot.</p>
                        <p>&emsp;At the same time, we can use Plotter functions such as plot_odom, plot_gt, plot_bel to monitor some information such as odometry, truth pose, belief, etc. in the plotter, 
                            so that we can verify the effectiveness of some algorithms.<br></p>
                        
                        <h6 class="text-secondary  text-uppercase mb-0" >2. Open Loop Control</h6>
                        <p>&emsp;To make the robot execute a "square" loop, I make the robot go straight, then turn 90 degrees in place, and repeat four times.<br>
                            When going straight, I set the linear velocity to 0.5 m/s and the execution time is 20 iterations in for loop; when rotating in place, I 
                            set the angular velocity to 0.1 rad/s and the execution time is 47 iterations in for loop.</p>
                        <center><img src="assets/video/lab10/openCode.png" /></center><br>
                        
                        <center><iframe width="700" height="600" src="https://www.youtube.com/embed/D4y7Kd7Eqns" frameborder="0" allowfullscreen></iframe></center><br>

                        <h6 class="text-secondary  text-uppercase mb-0" >3. Closed Loop Control</h6>
                        <center><img src="assets/video/lab10/closedCode.png" /></center><br>
                        <p>&emsp;(a). As long as the robot executes the program of rotation in place whenever it approaches an obstacle, no matter how many degrees it rotates, it can avoid the obstacle. 
                            Therefore, the range of this angle is relatively broad. In my program the robot will rotate about 50 degrees.<br></p>
                        
                        <p>&emsp;(b). According to my attempts, in the simulation environment, no matter how fast the robot can avoid obstacles, I even tried 100 m/s and it worked well, so this may also be a defect of the simulator.<br></p>

                        <p>&emsp;(c).The logic of this closed loop control is that when the data returned by the robot's distance sensor is less than a certain threshold, 
                            the robot will back up and rotate again. So how close the robot can get to the obstacle depends on the data returned by the distance sensor and 
                            the choice of the threshold. Since the distance sensor has noise, the threshold value needs to be set conservatively. The threshold I set is 0.3m, that is, 
                            when the robot is less than 0.3m away from the obstacle, it will perform backward and rotate.<br></p>

                        <p>&emsp;(d). Yes, my code always work. <br></p>

                       
                        <center><iframe width="700" height="600" src="https://www.youtube.com/embed/PzNeSEmX8iE" frameborder="0" allowfullscreen></iframe></center><br>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="portfolio-modal modal fade" id="portfolioModal11" tabindex="-1" aria-labelledby="portfolioModal11" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header border-0"><button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button></div>

                <div class="container">
                    <div class="col-lg-40">
                        <h6 class="text-secondary  text-uppercase mb-0" >1. Prediction Step</h6>
                        <p>Odometry Motion Model<br>
                            delta_rot_1, delta_trans and delta_rot_2 are there parameters that need be calculated for the following steps. And they are calculated
                            according to the equations given in lectrue 18.
                        </p>
                        <center><img src="assets/video/lab11/code1.png" /></center><br>
                        <p>And then use the compute_control function above twice to get the actual_u and expected_u. Combining these controls
                            with the gaussian distribution and rot_sigma/trans_sigma, the transition probability would be calculated.
                        </p>
                        <center><img src="assets/video/lab11/code2.png" /></center><br>
                        <p>With the functions above, it is sufficient to implement the prediction step by several for loops.</p>
                        <center><img src="assets/video/lab11/code3.png" /></center><br>
                        <center><img src="assets/video/lab11/code4.png" /></center><br>
                        <p>However, this way of prediction step needs 1944 to the power of 1944 iterations and takes a very long time (over one minute) to finish.
                            To simplify this step and save some time, I first loop through every belief at last time and check if its value is above
                            a threshold. If yes, loop through the every pose at current time and add up the product of the belief at last time and the
                            corresponding transition probability to the belief_bar at current time.
                        </p>
                        <center><img src="assets/video/lab11/code5.png" /></center><br>
                        <p>And the result of this simplified prediction step is surprisingly good, and it finished within a second.</p>


                        <h6 class="text-secondary  text-uppercase mb-0" >2. Update Step</h6>
                        <p>The update step loops through every cell of the configuration space. And at each cell, get the actual sensor readings
                            (self.obs_range_data) and the expected sensor readings (self.mapper.get_views(cx, cy, ca)). Assuming that 
                            individual measurements are independent given the robot state, the likelihood of the measurements would be the product of the
                            gaussian distributions of these measurements. And then the belief at each cell can be calculated by the likelihood of the 
                            measurements times the belief_bar at each cell.
                        </p>
                        <center><img src="assets/video/lab11/code6.png" /></center><br>

                        <h6 class="text-secondary  text-uppercase mb-0" >3. Simulation</h6>

                        <p>Using the code skeleton in lab11.ipynb, the bayes filter can be fast and performed successfully.</p>
                        <center><iframe width="700" height="600" src="https://www.youtube.com/embed/6w77xu2BIQE" frameborder="0" allowfullscreen></iframe></center><br>
                        <center><iframe width="700" height="600" src="https://www.youtube.com/embed/iTVmCAzoq5E" frameborder="0" allowfullscreen></iframe></center><br>
                        <br>
                        <center><img src="assets/video/lab11/sta.png" /></center><br>
                        <center><img src="assets/video/lab11/traj.png" /></center><br>
                        <p>As shown in the table and the plot, the trajectory of the ground truth and belief are every close and this
                            Bayes Filter only relied on the odometry information and sensor readings and is able to estimate the pose
                            of the robot.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="portfolio-modal modal fade" id="portfolioModal12" tabindex="-1" aria-labelledby="portfolioModal12" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header border-0"><button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button></div>

                <div class="container">
                    <div class="col-lg-40">
                        <h6 class="text-secondary text-center text-uppercase mb-0" >Collaboration: Lanyue Fang(lf355)</h6><br>
                        <h6 class="text-secondary  text-uppercase mb-0" >1. Test Localization in Simulation</h6>
                        <p>Here's the result of simulation. As shown in the figure below, the trajectory of the belief (blue) was very close to the 
                            ground truth (green) which demonstrated that the Bayes Filter Localization worked well. 
                        </p>
                        <center><img src="assets/video/lab12/task1.png" /></center><br>

                        <br><h6 class="text-secondary  text-uppercase mb-0" >2. Bayes Filter Localization: Update step</h6><br>
                        <p>(a) Implement the function perform_observation_loop
                            &emsp;In order to take advantage of the orientation control implemented by lab9, we modified 
                            the perform_observation_loop function. To this function are added the command to send the angle 
                            via bluetooth and the command to get the ToF data in a for loop.
                        </p>
                        <center><img src="assets/video/lab12/code1.png" /></center><br>
                        <center><iframe width="700" height="600" src="https://www.youtube.com/embed/b2Gwabk3wO8" frameborder="0" allowfullscreen></iframe></center><br>
                       
                        <p>(b) Localization at four marker poses<br>
                            &emsp;(1) -3 ft ,-2 ft ,0 deg (-0.9144 meter,-0.6096 meter ,0 deg)<br>
                            &emsp;&emsp;As shown in the figure below, the belief (blue) after the update step was (-0.914, -0.610, 10), the ground truth (green) 
                            was (-0.9144,-0.6096, 0) and the pose error was (-0.0004, 0.0004, -10).The two points of belief and ground truth are completely coincident 
                            in the plotter, which reflects that the pose estimate is quite accurate.</p>
                            <center><img src="assets/video/lab12/res1.png" /></center><br>
                            <center><img src="assets/video/lab12/raw1.png" /></center><br>

                            &emsp;(2) 0 ft ,3 ft ,0 deg (0 meter, 0.9144 meter ,0 deg)<br>
                            &emsp;&emsp;As shown in the figure below, the belief (blue) after the update step was (0.000., 0.914, -10.000), the ground truth (green) 
                            was (0, 0.9144, 0) and the pose error was (0, 0.0004, 10). The two points of belief and ground truth are completely coincident in the 
                            plotter, which reflects that the pose estimate is quite accurate.</p>
                            <center><img src="assets/video/lab12/res2.png" /></center><br>
                            <center><img src="assets/video/lab12/raw2.png" /></center><br>     

                            &emsp;(3) 5 ft ,-3 ft ,0 deg (1.524 meter, -0.9144 meter ,0 deg)<br>
                            &emsp;&emsp;As shown in the figure below, the belief (blue) after the update step was (1.219, -0.914, -10.000), the ground truth (green) 
                            was (1.524, -0.9144, 0) and the pose error was (0.305, -0.0004, 10).The pose estimate has a little error in the x direction, 
                            but the overall result is relatively accurate.</p>
                            <center><img src="assets/video/lab12/res3.png" /></center><br>
                            <center><img src="assets/video/lab12/raw3.png" /></center><br>   

                            &emsp;(4) 5 ft ,3 ft ,0 deg (1.524 meter,0.9144 meter ,0 deg)<br>
                            &emsp;&emsp;As shown in the figure below, the belief (blue) after the update step was (1.829, 0.914, -10.000), the ground truth (green) 
                            was (1.524, 0.9144, 0) and the pose error was (-0.305, 0.0004, 10). The pose estimate has a little error in the x direction, 
                            but the overall result is relatively accurate.</p>
                            <center><img src="assets/video/lab12/res4.png" /></center><br>
                            <center><img src="assets/video/lab12/raw4.png" /></center><br>

                        <p>(c) Discussion<br>
                            &emsp;The estimates of Localization in the four marker poses are accurate, the first two points are almost accurate, 
                            and the last two points have some errors in the x direction. The estimate in the all four poses has a 10 degree error in the angle. 
                            We think the reason why the estimates of the last two poses are not as accurate as those of the first two poses may be that the latter 
                            two poses are closer to the large box in the middle, and there is an error in the orientation control of the robot, so when approaching the 
                            box, the rotation angle is not accurate and the error is higher. In addition, since the ToF is located at the front end of the robot, 
                            the ToF is not collecting the exact distance from the center of the robot to the walls/obstacles, so it will cause certain errors. 
                            But when we add 0.08 meters (the distance from the ToF to the center of the robot) to all ToF readings, the result remains the same. 
                            Another possibility is that the actual box position is inconsistent with the box position in the map used by the precached true measurements.
                        </p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- * *                               SB Forms JS                               * *-->
        <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
    </body>
</html>
